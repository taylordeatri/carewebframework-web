'use strict';

define('cwf-table', ['cwf-core', 'cwf-widget'], function(cwf) { 
	/******************************************************************************************************************
	 * Table widget
	 ******************************************************************************************************************/
	
	cwf.widget.Table = cwf.widget.UIWidget.extend({
		
		/*------------------------------ Lifecycle ------------------------------*/
		
		init: function() {
			this._super();
		},
		
		/*------------------------------ Rendering ------------------------------*/
		
		render$: function() {
			return $('<table>');
		}
		
	});
	
	/******************************************************************************************************************
	 * Table columns widget
	 ******************************************************************************************************************/
	
	cwf.widget.Columns = cwf.widget.UIWidget.extend({
		
		/*------------------------------ Containment ------------------------------*/
		
		anchor$: function() {
			return this.sub$('inner');
		},
		
		/*------------------------------ Rendering ------------------------------*/
		
		render$: function() {
			return $(this.resolveEL('<thead><tr id="${id}-inner"/></thead>'));
		}
		
	});
	
	/******************************************************************************************************************
	 * Table column widget
	 ******************************************************************************************************************/ 
	
	cwf.widget.Column = cwf.widget.LabeledWidget.extend({		

		/*------------------------------ Rendering ------------------------------*/
		
		render$: function() {
			return $('<th>');
		},
		
		/*------------------------------ State ------------------------------*/
		
		label: function(v) {
			this.widget$.text(v);
		}
	
	});
	
	/******************************************************************************************************************
	 * Table rows widget
	 ******************************************************************************************************************/ 
	
	cwf.widget.Rows = cwf.widget.UIWidget.extend({
		
		/*------------------------------ Rendering ------------------------------*/
		
		render$: function() {
			return $('<tbody>');
		}
	
	});
	
	/******************************************************************************************************************
	 * Table row widget
	 ******************************************************************************************************************/
	
	cwf.widget.Row = cwf.widget.UIWidget.extend({
		
		/*------------------------------ Containment ------------------------------*/
		
		anchor$: function() {
			return $('<td>').appendTo(this.widget$);
		},
		
		onRemoveChild: function(child, destroyed, anchor$) {
			this._super(child, destroyed, anchor$);
			
			if (anchor$) {
				anchor$.remove();
			}
		},
		
		/*------------------------------ Rendering ------------------------------*/
		
		render$: function() {
			return $('<tr>');
		}
		
	});
	
	return cwf.widget;
});